class ChatEngine{constructor(e,s){this.chatBox=$("#"+e),this.userEmail=s,this.socket=io.connect("http://localhost:5000"),this.userEmail&&(console.log("User email sent form home : ",s),this.connectionHandler())}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("Connnection established using socket!"),e.socket.emit("join_room",{user_email:e.userEmail,chatroom:"codeial"}),e.socket.on("user_joined",(function(e){console.log("A user joined",e)})),$("#send-message").click((function(){let s=$("#chat-message-input").val();""!=s&&e.socket.emit("send_message",{message:s,user_email:e.userEmail,chatroom:"codeial"})})),e.socket.on("receive_message",(function(s){console.log("message received :",s);let o=$("<li>"),t="other-message";s.user_email==e.userEmail&&(t="self-message"),o.append($("<span>",{html:s.message})),o.children("span").append($("<sub>",{html:"  @"+s.user_email})),o.addClass(t),$("#chat-messages-list").append(o);let n=document.getElementById("chat-messages-list");n.scrollTop=n.scrollHeight,console.log("Height of the div ",n.scrollHeight)}))}));let s=document.getElementById("chat-box-header"),o=document.getElementById("arrow-check");s.addEventListener("click",()=>{$("#user-chat-box").toggleClass("hide-chat-box"),console.log("ChatEngine -> connectionHandler -> arrow_input.checked",o.checked)})}}